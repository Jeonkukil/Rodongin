<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="shop.mtcoding.rodongin.model.announcement.AnnouncementRepository">

    <select id="findAll" resultType="shop.mtcoding.rodongin.model.announcement.Announcement">
        SELECT * FROM announcement
    </select>


    <select id="findAnnouncementAndCompanyId" resultType="shop.mtcoding.rodongin.dto.announcement.AnnouncementResp$AnnouncementDetailReqDto">
        select * from announcement a
    inner join company c
    on a.company_id = c.id
    where a.id = #{id}
    </select>
    <select id="findAnnouncementlist" resultType="shop.mtcoding.rodongin.dto.announcement.AnnouncementResp$AnnouncementDetailReqDto">
        select * from announcement a
    inner join company c
    on a.company_id = c.id
    </select>

    <select id="findById" resultType="shop.mtcoding.rodongin.model.announcement.Announcement">
        SELECT * FROM announcement WHERE id = #{id}
    </select>

    <insert id="insert">
   insert into announcement (company_id, stack_id,
        announcement_title, 
        announcement_content, announcement_carrer, 
         announcement_hire_type, announcement_rec_num,
          announcement_salary, announcement_area, created_at ) 
          values(#{companyId}, #{stackId}, #{announcementTitle}, 
          #{announcementContent},#{announcementCarrer},#{announcementHireType},
          #{announcementRecNum},#{announcementSalary},#{announcementArea},now())
    </insert>

    <delete id="deleteById">
        DELETE FROM announcement WHERE id = #{id}
    </delete>

    <update id="updateById">
       update announcement set stack_id= #{stackId}, announcement_thumbnail= #{announcementThumbnail}, announcement_title= #{announcementTitle}, 
        announcement_content= #{announcementContent},  announcement_carrer=#{ announcementCarrer},
        announcement_hire_type= #{announcementHireType},  announcement_rec_num= #{ announcementRecNum},
        announcement_salary= #{announcementSalary}, announcement_area= #{announcementArea}
         where id = #{id}
    </update>
  <select id="findByDetailUser" resultType="shop.mtcoding.rodongin.model.announcement.Announcement">
    SELECT * FROM announcement WHERE id = #{id}
  </select>
  
</mapper>